[
  {
    "name": "Theater",
    "_classname": "style",
    "info": "Used in the Framsticks Theater intro",
    "code": "\n@include \"stdneurons.inc\"\n\nfunction default_model_build()\n{\n  VisualModel.jointshadow = 1;\n}\n\nfunction food_model_build()\n{\n  VisualModel.partshadow = 1;\n}\n\nfunction default_part_build()\n{\n  GeomBuilder.addTransform(GeomBuilder.rootNode);\n  Element.node = GeomBuilder.currentNode;\n}\n\nfunction default_flag_build()\n{\n  GeomBuilder.addTransform(GeomBuilder.rootNode);\n  Element.node = GeomBuilder.currentNode;\n  if (World.wrldwat > -5.0)\n    Loader.load(\"thankyou.ac\");\n  else\n    Loader.load(\"please.ac\");\n  if (Loader.loaded)\n    GeomBuilder.add(Loader.loaded);\n}\n\nfunction loadAndAddAsTransformNode(filename)\n{\n  Loader.load(filename);\n  if (Loader.loaded)\n  {\n    GeomBuilder.addTransform(GeomBuilder.rootNode);\n    Element.node = GeomBuilder.currentNode;\n    GeomBuilder.add(Loader.loaded);\n  }\n}\n\nfunction food_part_build()\n{\n  loadAndAddAsTransformNode(\"balloon.ac\");\n}\n\nfunction default_joint_build()\n{\n  Element.useJointPart1();\n  var as=p.as;\n  Element.useJointPart2();\n  as=(as+p.as)/2;  \n  loadAndAddAsTransformNode(\"greenstick\" + int(1.0 + 4.999*as) + \".ac\");\n}\n\nfunction default_part_update, default_flag_update()\n{\n  Element.useMechPart();\n  GeomBuilder.matrixReset();\n  GeomBuilder.matrixMove1(MechPart.pos);\n  GeomBuilder.matrixOrient1(MechPart.orient);\n  GeomBuilder.setMatrix(Element.node);\n}\n\nfunction food_part_update()\n{\n  Element.useMechPart();\n  GeomBuilder.matrixReset();\n  GeomBuilder.matrixMove1(MechPart.pos);\n  GeomBuilder.matrixMove(0,0,-0.2);\n  GeomBuilder.matrixOrient1(MechPart.orient);\n  Element.useCreature();\n  var e;\n  if (Creature.energy0>0)\n   {\n   e = Creature.energy / Creature.energy0;\n   if (e > 1.0)\n    e = 1.0;\n   else if (e < 0.05)\n    e = 0.05;\n   GeomBuilder.matrixScale(e, e, e);\n   }\n  else e=1.0;\n  GeomBuilder.setMatrix(Element.node);\n  VisualModel.partshadow = e;\n}\n\nfunction default_joint_update()\n{\n  Element.useMechJointPart1();\n  Element.useMechJoint();\n  GeomBuilder.matrixReset();\n  GeomBuilder.matrixMove1(MechPart.pos);\n  GeomBuilder.matrixOrient1(MechJoint.calcorient);\n  GeomBuilder.matrixScale(MechJoint.length, 1, 1);\n  GeomBuilder.setMatrix(Element.node);\n}\n\n\nfunction modelviewer_build_empty()\n{\n  Scene.backcolor = 0;\n  Scene.worldtexture = \"\";\n}\n\nfunction modelviewer_build()\n{\n  Scene.backcolor = 0;\n  Scene.worldtexture = \"\";\n}\n\nfunction world_build()\n{\n  Scene.backcolor = 0;\n  Scene.worldtexture = \"\";\n  Loader.load(\"theater2.ac\");\n  var scale = World.wrldsiz / 20.0;\n  GeomBuilder.addTransform(GeomBuilder.rootNode);\n  GeomBuilder.matrixReset();\n  GeomBuilder.matrixScale(scale, scale, scale);\n  GeomBuilder.matrixMove(0, 0, -0.2);\n  GeomBuilder.setMatrix(GeomBuilder.currentNode);\n  GeomBuilder.add(Loader.loaded);\n\n  if (World.wrldwat > -5.0)\n  {\n    var i, s;\n    for (i = 0;i < 14;i++)\n    {\n      s = 0.4 + 0.2 * Math.rnd01;\n      Loader.load(\"balloon.ac\");\n      GeomBuilder.addTransform(GeomBuilder.rootNode);\n      GeomBuilder.matrixReset();\n      GeomBuilder.matrixScale(s, s, s);\n      GeomBuilder.matrixMove(Math.rnd01*World.wrldsiz, Math.rnd01*World.wrldsiz, 4.0 + Math.rnd01*6.0);\n      GeomBuilder.setMatrix(GeomBuilder.currentNode);\n      GeomBuilder.add(Loader.loaded);\n    }\n  }\n}\n\n"
  }
]