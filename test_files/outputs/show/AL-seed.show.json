[
  {
    "name": "Initial genotypes",
    "_classname": "show",
    "expdef": "standard",
    "code": "@include \"AL-shared.inc\"\n\nfunction onBack()\n{\nif (closePopup()) return;\nShowManager.show=\"AL-top\";\n}\n\nfunction onLoad()\n{\n\tGLDisplay.simsteps = 0;\n\tGLDisplay.user_interaction=0;\n\tGLDisplay.world_visibility=1;\n\tGLDisplay.skybox=\"cubeworld\";\n\tShowManager.dispinfo=0;\n\tGLDisplay.back_action=\"onBack\";\n\n\tvar but;\n\tvar y=0.2;\n\tfor(var f in [\"1\",\"9\",\"F\"])\n\t{\n\t\tbut=GUI.newButton(\"seed-\"+f,\"Get a seed for f\"+f+\" genotype\");\n\t\tbut.image=GUI.newModel(\"mod\",simplestGenoForFormat(f).genotype);\n\t\tbut.setAutolayout(0,0,0,0, 0.1,y,0.8,0.2);\n\t\tbut.userdata=f;\n\t\ty+=0.25;\n\t}\n\n\tg_helptxt=\"<p>Click one of the buttons to get the simplest specimen for various genetic encodings.\"+\n\t\"<p>Each encoding (a.k.a. a genetic language, a genetic representation or a genetic format) has its own characteristics, and dedicated genetic operators (mutation, crossing over and repair). Learn more <a href=\\\"http://www.framsticks.com/a/al_genotype.html\\\">here</a>.\";\n\taddHelpButton(GUI.top_right);\n}\n\nfunction simplestGenoForFormat(f)\n{\n\treturn GenMan.getSimplest(f);\n}\n\nfunction onShowStep()\n{\n\tvar anim=Math.time;\n\tTrackingCam.setViewDir(90.0 + 10.0*Math.sin(anim*0.5), 20.0 + 10.0*Math.cos(anim*0.5));\n\tTrackingCam.cam_zoom = (2.5 + Math.sin(anim * 0.15)) * 3.0 / World.wrldsiz;\n}\n\nfunction onGUIEvent(elem,arg)\n{\n\tif (handleHelp(elem)) return;\n\n\tif (String.startsWith(elem.name,\"seed-\"))\n\t{\n\t\tloadHistory();\n\t\tvar g=simplestGenoForFormat(elem.userdata);\n\t\tg.name=\"Initial f\"+g.format;\n\t\tvar found=findGenotypeAndName(g.name,g.genotype,GenePools[0]);\n\t\tGenePools[0].clear();\n\t\tg=GenePools[0].add(g); // g becomes Genotype\n\t\tsetInitialDataDictionary(g);\n\t\tsaveCurrent();//always save current\n\t\tif (found<0) //add history only if it is not already there\n\t\t\taddHistory(g);\n\t\tShowManager.show=\"AL-history\";\n\t\treturn;\n\t}\n}\n\nfunction onKey(code)\n{\nif (code==GUI.KEY_MENU)\n   {\n   onBack();\n   return 1;\n   }\nreturn 0;\n}\n\n"
  }
]